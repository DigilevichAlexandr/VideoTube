@* Закомментировано для отключения авторизации *@
@* @page "/auth-callback" *@
@* @using VideoTube.Client.Services *@
@* @inject AuthService AuthService *@
@* @inject NavigationManager Navigation *@

@* <PageTitle>Authentication</PageTitle> *@

@* <div class="container mt-5"> *@
@*     <div class="row justify-content-center"> *@
@*         <div class="col-md-6"> *@
@*             <div class="card"> *@
@*                 <div class="card-body text-center"> *@
@*                     <h5 class="card-title">Processing Authentication...</h5> *@
@*                     <div class="spinner-border text-primary" role="status"> *@
@*                         <span class="visually-hidden">Loading...</span> *@
@*                     </div> *@
@*                     <p class="mt-3">Please wait while we complete your sign-in.</p> *@
@*                 </div> *@
@*             </div> *@
@*         </div> *@
@*     </div> *@
@* </div> *@

@* @code { *@
@*     protected override async Task OnInitializedAsync() *@
@*     { *@
@*         var uri = Navigation.ToAbsoluteUri(Navigation.Uri); *@
@*         var query = uri.Query; *@
@*          *@
@*         // Parse token from query string *@
@*         string? token = null; *@
@*         if (query.StartsWith("?")) *@
@*         { *@
@*             var queryParams = query.Substring(1).Split('&') *@
@*                 .Select(p => p.Split('=')) *@
@*                 .ToDictionary(p => p[0], p => p.Length > 1 ? p[1] : ""); *@
@*              *@
@*             if (queryParams.ContainsKey("token")) *@
@*             { *@
@*                 token = queryParams["token"]; *@
@*             } *@
@*         } *@

@*         if (!string.IsNullOrEmpty(token)) *@
@*         { *@
@*             var success = await AuthService.ProcessAuthCallbackAsync(token); *@
@*             if (success) *@
@*             { *@
@*                 Navigation.NavigateTo("/"); *@
@*             } *@
@*             else *@
@*             { *@
@*                 Navigation.NavigateTo("/login-error"); *@
@*             } *@
@*         } *@
@*         else *@
@*         { *@
@*             Navigation.NavigateTo("/login-error"); *@
@*         } *@
@*     } *@
@* } *@ 